# å¤©æ°”æ•°æ®å®šæ—¶ä»»åŠ¡ä½¿ç”¨æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬ç³»ç»Ÿæä¾›äº†å®Œæ•´çš„å®šæ—¶ä»»åŠ¡åŠŸèƒ½ï¼Œå¯ä»¥æ¯å¤©æ—©ä¸Š9:30è‡ªåŠ¨æ‰§è¡Œå¤©æ°”æ•°æ®æ”¶é›†ï¼Œå¹¶å°†æ•°æ®å­˜å…¥MySQLæ•°æ®åº“ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…å®šæ—¶ä»»åŠ¡

æ‰‹åŠ¨å®‰è£…å®šæ—¶ä»»åŠ¡ï¼š
```bash
# å¤åˆ¶é…ç½®æ–‡ä»¶åˆ°ç³»ç»Ÿç›®å½•
cp com.weather.daily.plist ~/Library/LaunchAgents/

# åŠ è½½å®šæ—¶ä»»åŠ¡
launchctl load ~/Library/LaunchAgents/com.weather.daily.plist
```

### 2. å¯åŠ¨å®šæ—¶ä»»åŠ¡

å®šæ—¶ä»»åŠ¡ä¼šåœ¨åŠ è½½åè‡ªåŠ¨å¯åŠ¨ï¼Œæ— éœ€é¢å¤–æ“ä½œã€‚

### 3. éªŒè¯å®‰è£…

æ£€æŸ¥ä»»åŠ¡çŠ¶æ€ï¼š
```bash
launchctl list | grep com.weather.daily
```

## ğŸ“ æ–‡ä»¶è¯´æ˜

### æ ¸å¿ƒæ–‡ä»¶

- **`æ¯æ—¥è‡ªåŠ¨æ‰§è¡Œ.py`**: ä¸»è¦çš„è‡ªåŠ¨æ‰§è¡Œè„šæœ¬
  - åŒ…å«å®Œæ•´çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
  - è‡ªåŠ¨æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
  - æ‰§è¡ŒJWTç”Ÿæˆã€æ•°æ®æ”¶é›†ã€ç»Ÿè®¡åˆ†æä¸‰ä¸ªæ­¥éª¤
  - ç”Ÿæˆè¯¦ç»†çš„æ‰§è¡Œæ—¥å¿—

- **`com.weather.daily.plist`**: launchdé…ç½®æ–‡ä»¶
  - å®šä¹‰å®šæ—¶ä»»åŠ¡æ‰§è¡Œæ—¶é—´ï¼ˆæ¯å¤©æ—©ä¸Š9:30ï¼‰
  - é…ç½®å·¥ä½œç›®å½•å’Œç¯å¢ƒå˜é‡
  - è®¾ç½®æ—¥å¿—è¾“å‡ºè·¯å¾„

- **`com.weather.daily.plist`**: launchdé…ç½®æ–‡ä»¶
  - å®šä¹‰å®šæ—¶ä»»åŠ¡æ‰§è¡Œæ—¶é—´ï¼ˆæ¯å¤©æ—©ä¸Š11:00ï¼‰
  - é…ç½®å·¥ä½œç›®å½•å’Œç¯å¢ƒå˜é‡
  - è®¾ç½®æ—¥å¿—è¾“å‡ºè·¯å¾„

### æ—¥å¿—æ–‡ä»¶

- **`logs/daily_weather_YYYYMMDD.log`**: æ¯æ—¥æ‰§è¡Œæ—¥å¿—
- **`logs/daily_weather_stdout.log`**: æ ‡å‡†è¾“å‡ºæ—¥å¿—
- **`logs/daily_weather_stderr.log`**: é”™è¯¯è¾“å‡ºæ—¥å¿—

## â° æ‰§è¡Œæ—¶é—´

- **é»˜è®¤æ—¶é—´**: æ¯å¤©æ—©ä¸Š 11:00
- **æ‰§è¡Œå†…å®¹**: 
  1. ç”ŸæˆJWT Token
  2. æ”¶é›†æœ€æ–°å¤©æ°”æ•°æ®
  3. ç”Ÿæˆç»Ÿè®¡æŠ¥å‘Š

## ğŸ”§ ç®¡ç†å‘½ä»¤

### æ‰‹åŠ¨ç®¡ç†

ä½¿ç”¨å‘½ä»¤è¡Œè¿›è¡Œç®¡ç†ï¼š
```bash
# åŠ è½½å®šæ—¶ä»»åŠ¡
launchctl load ~/Library/LaunchAgents/com.weather.daily.plist

# å¸è½½å®šæ—¶ä»»åŠ¡
launchctl unload ~/Library/LaunchAgents/com.weather.daily.plist
```

### å‘½ä»¤è¡Œç®¡ç†

```bash
# åŠ è½½å®šæ—¶ä»»åŠ¡
launchctl load ~/Library/LaunchAgents/com.weather.daily.plist

# å¸è½½å®šæ—¶ä»»åŠ¡
launchctl unload ~/Library/LaunchAgents/com.weather.daily.plist

# æŸ¥çœ‹ä»»åŠ¡çŠ¶æ€
launchctl list | grep com.weather.daily

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
tail -f logs/daily_weather_*.log
```

## ğŸ“Š ç›‘æ§å’Œè°ƒè¯•

### æŸ¥çœ‹æ‰§è¡ŒçŠ¶æ€

1. **æ£€æŸ¥ä»»åŠ¡æ˜¯å¦è¿è¡Œ**:
   ```bash
   launchctl list | grep com.weather.daily
   ```

2. **æŸ¥çœ‹ä»Šæ—¥æ—¥å¿—**:
   ```bash
   cat logs/daily_weather_$(date +%Y%m%d).log
   ```

3. **å®æ—¶ç›‘æ§æ—¥å¿—**:
   ```bash
   tail -f logs/daily_weather_$(date +%Y%m%d).log
   ```

### å¸¸è§é—®é¢˜æ’æŸ¥

1. **ä»»åŠ¡æœªæ‰§è¡Œ**:
   - æ£€æŸ¥ä»»åŠ¡æ˜¯å¦å·²åŠ è½½: `launchctl list | grep com.weather.daily`
   - æ£€æŸ¥æ—¥å¿—æ–‡ä»¶æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
   - ç¡®è®¤MySQLæœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ

2. **æ•°æ®æ”¶é›†å¤±è´¥**:
   - æ£€æŸ¥JWT Tokenæ˜¯å¦æœ‰æ•ˆ
   - ç¡®è®¤ç½‘ç»œè¿æ¥æ­£å¸¸
   - æŸ¥çœ‹é”™è¯¯æ—¥å¿—è·å–è¯¦ç»†ä¿¡æ¯

3. **æ•°æ®åº“è¿æ¥å¤±è´¥**:
   - ç¡®è®¤MySQLæœåŠ¡æ­£åœ¨è¿è¡Œ
   - æ£€æŸ¥æ•°æ®åº“è¿æ¥é…ç½®
   - éªŒè¯ç”¨æˆ·æƒé™

## ğŸ”„ ä¿®æ”¹æ‰§è¡Œæ—¶é—´

å¦‚éœ€ä¿®æ”¹æ‰§è¡Œæ—¶é—´ï¼Œç¼–è¾‘ `com.weather.daily.plist` æ–‡ä»¶ä¸­çš„ `StartCalendarInterval` éƒ¨åˆ†ï¼š

```xml
<key>StartCalendarInterval</key>
<dict>
    <key>Hour</key>
    <integer>11</integer>    <!-- å°æ—¶ (0-23) -->
    <key>Minute</key>
    <integer>0</integer>     <!-- åˆ†é’Ÿ (0-59) -->
</dict>
```

ä¿®æ”¹åéœ€è¦é‡æ–°åŠ è½½ä»»åŠ¡ï¼š
```bash
launchctl unload ~/Library/LaunchAgents/com.weather.daily.plist
launchctl load ~/Library/LaunchAgents/com.weather.daily.plist
```

## ğŸ›¡ï¸ å®‰å…¨è€ƒè™‘

1. **æƒé™ç®¡ç†**: ç¡®ä¿è„šæœ¬æœ‰è¶³å¤Ÿçš„æƒé™è®¿é—®é¡¹ç›®ç›®å½•å’Œæ•°æ®åº“
2. **æ—¥å¿—ç®¡ç†**: å®šæœŸæ¸…ç†æ—§çš„æ—¥å¿—æ–‡ä»¶ä»¥èŠ‚çœç£ç›˜ç©ºé—´
3. **ç½‘ç»œè®¿é—®**: ç¡®ä¿ç³»ç»Ÿèƒ½å¤Ÿè®¿é—®å¤©æ°”APIæœåŠ¡

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

1. **è¶…æ—¶è®¾ç½®**: è„šæœ¬è®¾ç½®äº†5åˆ†é’Ÿè¶…æ—¶ï¼Œé¿å…é•¿æ—¶é—´æŒ‚èµ·
2. **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œç¡®ä¿å•ä¸ªæ­¥éª¤å¤±è´¥ä¸å½±å“æ•´ä½“æµç¨‹
3. **æ—¥å¿—è½®è½¬**: æŒ‰æ—¥æœŸç”Ÿæˆæ—¥å¿—æ–‡ä»¶ï¼Œä¾¿äºç®¡ç†å’ŒæŸ¥çœ‹

## ğŸ¯ ä½¿ç”¨å»ºè®®

1. **é¦–æ¬¡ä½¿ç”¨**: å»ºè®®å…ˆæ‰‹åŠ¨æµ‹è¯•è„šæœ¬ï¼Œç¡®è®¤ä¸€åˆ‡æ­£å¸¸åå†å¯ç”¨å®šæ—¶ä»»åŠ¡
2. **ç›‘æ§**: å®šæœŸæ£€æŸ¥æ—¥å¿—æ–‡ä»¶ï¼Œç¡®ä¿ä»»åŠ¡æ­£å¸¸è¿è¡Œ
3. **å¤‡ä»½**: å®šæœŸå¤‡ä»½æ•°æ®åº“å’Œé‡è¦é…ç½®æ–‡ä»¶
4. **æ›´æ–°**: åŠæ—¶æ›´æ–°JWT Tokenå’ŒAPIé…ç½®

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. ç³»ç»Ÿæ—¥å¿—æ–‡ä»¶
2. é¡¹ç›®æ—¥å¿—æ–‡ä»¶
3. MySQLè¿æ¥çŠ¶æ€
4. ç½‘ç»œè¿æ¥çŠ¶æ€

---

**æ³¨æ„**: å®šæ—¶ä»»åŠ¡ä¾èµ–äºç³»ç»Ÿå¯åŠ¨ï¼Œè¯·ç¡®ä¿ç³»ç»Ÿåœ¨é¢„å®šæ—¶é—´å¤„äºè¿è¡ŒçŠ¶æ€ã€‚ 